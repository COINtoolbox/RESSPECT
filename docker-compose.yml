version: '3'

services:
  ubuntu:
    container_name: resspect
    image: ubuntu
    tty: true
    networks: 
      - resspectNetwork
    command: ["sh", "-c", "echo 'Starting container...';echo 'Updating package lists...';apt update;echo 'Upgrading packages...';apt upgrade -y;tail -f /dev/null;"]
    environment:
      - DB_USER=admin
      - DB_PASS=verysecurepassword
      - DB_HOST=resspectdb
      - DB_PORT=5432
      - DB_NAME=resspectdb


    depends_on:
      - db
  db:
    container_name: resspectdb
    image: postgres
    networks: 
      - resspectNetwork
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=verysecurepassword
      - POSTGRES_DB=resspectdb
    volumes:
      - ./resspectdb.sql:/docker-entrypoint-initdb.d/resspectdb.sql


networks:
  resspectNetwork:
    driver: bridge

